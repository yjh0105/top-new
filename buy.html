<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>网上预定-米卡米卡蛋糕网-在线预定</title>
    <link rel="stylesheet" href="css/buy.css">
</head>
<body>
    <!-- 顶部 -->
    <div class='top' >
            <div class="top-left">
                <p>您好！请<a href="#">登录</a>或<a href="#">加入会员</a></p>
            </div>
            <ul class="list">
                <li>礼金卡充值</li>
                <li>如何订购</li>
                <li>配送范围</li>
                <li>提前预约时间</li>
                <li>关于米卡米卡蛋糕</li>
            </ul>
        </div>
        <!-- 订购 -->
        <div class="head">
            <div class="head-1">
                <div class="head-left">
                    <img src="img/erweima.png" >
                    <p>订购电话：400-606-7757</p>
                </div>
                <div class="head-right">
                    <div class="shopp"></div>
                    <p>购物车()</p>
                 </div>
            </div>
        </div>
        <!-- 列表 -->
        <div class="menu">
            <ul>
                <li><a href="#">首页</a></li>
                <li><a href="#" class="whole">全部蛋糕</a></li>
                <li><a href="#">下午茶19国</a></li>
                <li><a href="#">企业专区</a></li>
                <li><a href="#">蛋糕资讯</a></li>
                <li><a href="#">会员中心</a></li>
             <li><a href="#">关于米卡米卡</a></li>
            </ul>
        </div>
        <!-- 蛋糕展示区 -->
        <div class="show">
            <div class="show-1" data-good-id="sp1">
                <img src="img/7ef65f69631c6d891f0ffca665ba0a1fe12b9f12.jpg" alt="">
                <h2>小点心</h2>
                <h3>399.00RMB</h3>
                <div class="show-2">
                    <a href="javascript:;" class="plus1">-</a>
                    <input type="text" value='1'>
                    <a href="javascript:;" class="plus">+</a>
                    <div class="join">加入购物车</div>
                </div>
            </div>
            <div class="show-1" data-good-id="sp2">
                    <img src="img/1ec003345c88b8d23acc228765364eb1.jpg" alt="">
                    <h2>绵羊</h2>
                    <h3>232.00RMB</h3>
                    <div class="show-2">
                        <a href="javascript:;" class="plus1">-</a>
                        <input type="text" value='1'>
                        <a href="javascript:;" class="plus">+</a>
                        <div class="join">加入购物车</div>
                    </div>
            </div>
            <div class="show-1" data-good-id="sp3">
                        <img src="img/7da164ede5b247156e076bdeb1d42ff26130cb9a.jpg" alt="">
                        <h2>爱心</h2>
                        <h3>411.00RMB</h3>
                        <div class="show-2">
                            <a href="javascript:;" class="plus1">-</a>
                            <input type="text" value='1'>
                            <a href="javascript:;" class="plus">+</a>
                            <div class="join">加入购物车</div>
                        </div>
            </div>
            <div class="show-1" data-good-id="sp4">
                            <img src="img/8ede23f1709930c4e709a0ff3de5af69.jpg" alt="">
                            <h2>兔兔</h2>
                            <h3>333.00RMB</h3>
                            <div class="show-2">
                                <a href="javascript:;" class="plus1">-</a>
                                <input type="text" value='1'>
                                <a href="javascript:;" class="plus">+</a>
                                <div class="join">加入购物车</div>
                            </div>
            </div>
            <div class="show-1" data-good-id="sp5">
                    <img src="img/41a0cd78d523cf1dd2015ac2d55696cf.jpg" alt="">
                    <h2>小狗狗</h2>
                    <h3>399.00RMB</h3>
                    <div class="show-2">
                        <a href="javascript:;" class="plus1">-</a>
                        <input type="text" value='1'>
                        <a href="javascript:;" class="plus">+</a>
                        <div class="join">加入购物车</div>
                    </div>
            </div>
            <div class="show-1" data-good-id="sp6">
                  <img src="img/59c362b0d1276aed556ee836791da14ff8ef8528.jpg" alt="">
                    <h2>大鲨鱼</h2>
                    <h3>299.00RMB</h3>
                    <div class="show-2">
                        <a href="javascript:;" class="plus1">-</a>
                        <input type="text" value='1'>
                        <a href="javascript:;" class="plus">+</a>
                        <div class="join">加入购物车</div>
                    </div>
            </div>
            <div class="show-1" data-good-id="sp7">
                    <img src="img/69cbc8b2ed3a1312588b5bf2334344a6e1359bf7.jpg" alt="">
                    <h2>要来一块吗</h2>
                    <h3>199.00RMB</h3>
                    <div class="show-2">
                        <a href="javascript:;" class="plus1">-</a>
                        <input type="text" value='1'>
                        <a href="javascript:;" class="plus">+</a>
                        <div class="join">加入购物车</div>
                    </div>
            </div>
            <div class="show-1" data-good-id="sp8">
                    <img src="img/71c94941c1c94e3964e400afddedf43e.jpg" alt="">
                    <h2>要来一块吗</h2>
                    <h3>399.00RMB</h3>
                    <div class="show-2">
                        <a href="javascript:;" class="plus1">-</a>
                        <input type="text" value='1'>
                        <a href="javascript:;" class="plus">+</a>
                        <div class="join">加入购物车</div>
                    </div>
            </div>
            <div class="show-1" data-good-id="sp9">
                    <img src="img/79aaca10f35f6a52d1ce87c621e8a26dd41e2c0e.jpg" alt="">
                    <h2>要来一块吗</h2>
                    <h3>399.00RMB</h3>
                    <div class="show-2">
                        <a href="javascript:;" class="plus1">-</a>
                        <input type="text" value='1'>
                        <a href="javascript:;" class="plus">+</a>
                        <div class="join">加入购物车</div>
                    </div>
            </div>
            <div class="show-1" data-good-id="sp10">
                    <img src="img/1006c0f568ab56002514179c3515dd6f.jpg" alt="">
                    <h2>要来一块吗</h2>
                    <h3>399.00RMB</h3>
                    <div class="show-2">
                        <a href="javascript:;" class="plus1">-</a>
                        <input type="text" value='1'>
                        <a href="javascript:;" class="plus">+</a>
                        <div class="join">加入购物车</div>
                    </div>
            </div>
            <div class="show-1" data-good-id="sp11">
                    <img src="img/a5aa103cdf90ffc610015a3db91d0373.jpg" alt="">
                    <h2>要来一块吗</h2>
                    <h3>399.00RMB</h3>
                    <div class="show-2">
                        <a href="javascript:;" class="plus1">-</a>
                        <input type="text" value='1'>
                        <a href="javascript:;" class="plus">+</a>
                        <div class="join">加入购物车</div>
                    </div>
            </div>
            <div class="show-1" data-good-id="sp12">
                    <img src="img/b32c4080201d1febb53f0a89e4542203.jpg" alt="">
                    <h2>要来一块吗</h2>
                    <h3>399.00RMB</h3>
                    <div class="show-2">
                        <a href="javascript:;" class="plus1">-</a>
                        <input type="text" value='1'>
                        <a href="javascript:;" class="plus" >+</a>
                        <div class="join">加入购物车</div>
                    </div>
            </div>            
        </div>
         <!-- 广告栏 -->
         <div class="adv"> 
            <div class="as">
                <div class="hide-1"><h6>我的订单</h6></div> 
                <div class="adv-1"></div>
            </div>
            <div class="as-1">
                <div class="hide-2"><h6>全天派送</h6></div> 
                <div class="adv-2"></div>
            </div>
            <div class="adv-3"> 
                <div class="gouwu-1"></div>
                <div class="gouwu">购<br>物<br>车</div>
            </div>
           <div class="adv-4"></div>
           <div class="adv-5"></div>
           <div class="adv-6"></div>
        </div>
        <!-- 友情链接 -->
        <div class="link">
            <div class="links">
                <div class="link-1">
                    <ul class="feifed">
                        <li>帮助中心</li>
                        <li>如何订购</li>
                        <li>配送范围</li> 
                        <li>会员升级</li>
                        <li>支付中心</li>
                        <li>礼金卡使用说明</li>
                    </ul>
                </div>
                <div class="link-1">
                    <ul class="feifed">
                        <li>公司简介</li>
                        <li>关于米卡米卡</li>
                        <li>品牌创始人</li> 
                        <li>会员升级</li>
                        <li>支付中心</li>
                        <li>明星大咖</li>
                        <li>最新新闻</li>
                    </ul>
                </div>
                <div class="link-1">
                    <ul class="feifed">
                        <li>让我们成为朋友</li>
                        <li>京东店铺</li>
                        <li>淘宝店铺</li> 
                        <li>新浪微博</li>
                    </ul>
                </div>
                <div class="link-2">
                    <h5>
                    嗨！~你好，听说你喜欢我们好久了，来交个朋友吧~<br>
                    扫描下方二维码<br>
                    关注我们的微信公众号<br>
                    微信下单有新人专享优惠券哦！
                    </h5>
                    <img src="img/7d154ab774e39df948801fad76aa94be.png" alt="">
                </div>
            </div>
        </div>
        <script src="js/jquery-1.12.4.js"></script>
        <script type="text/javascript" src="js/jquery.cookie.js" ></script>
        <script> 

          initCartNum();
            let $toCart = $('.join');
            $.each($toCart,function(){
                $(this).click(function(event){
                    let goodId = $(this).parent().parent().attr('data-good-id');
                    let goodName = $(this).parent().prev().prev().text();
                    let goodPrice =parseInt( $(this).parent().prev().text());
                    let goodSrc = $(this).parent().prev().prev().prev().attr('src');
                    
                    let cookieStr = $.cookie('cart') ? $.cookie('cart') : '';
					let cookieObj = $strToObj(cookieStr);
                    if(goodId in cookieObj){
						cookieObj[goodId].num ++;
					}else{
						cookieObj[goodId] = {
							"name" : goodName,
							"price" : goodPrice,
							"src" : goodSrc,
							"num" : 1
						}
					}
                    $.cookie('cart',JSON.stringify(cookieObj),{path : '/'});


                    initCartNum();
                    function initCartNum(){
				let cookieStr = $.cookie('cart') ? $.cookie('cart') : '';
				let cookieObj = $strToObj(cookieStr);
				let sum = 0;
				for(let i in cookieObj){
					sum += cookieObj[i].num;
				}
				 $('.head-right p').text(`购物车(${sum})`);
			}
                })
            })
            function initCartNum(){
				let cookieStr = $.cookie('cart') ? $.cookie('cart') : '';
				let cookieObj = $strToObj(cookieStr);
				let sum = 0;
				for(let key in cookieObj){
					sum += cookieObj[key].num;
				}
                console.log(sum)
				 $('.head-right p').text(`购物车(${sum})`);
			}
                function $strToObj(str){
				if(!str){
					return {};
				}
				return JSON.parse(str);
			}

        //     sum = 1;
        // $('.plus1').click(function(){
        //     if(sum > 1){
        //      sum --; 
        //      $('.show-2 input').val(sum);
        //     }
        // })
        // $('.show-2 .plus').click(function(){
        //     if(sum < 99){ 
        //         sum ++;
        //         $('.show-2 input').val(sum)}
        // }){



            // var $sum = 1;
            //  $('.plus').click(function(){
            //      if(!this.aaa)
            //         this.sum = $sum;
            //     else
            //         this.sum = $('.show-1').get($index).qwe;
            //      var $index = $('.plus').index(this);
            //      if(this.sum > 0){
            //         this.sum ++;
            //          $('input').get($index).value = this.sum;
            //           this.obj = this.sum;
            //           $('.show-1').get($index).qwe = this.sum;
            //           console.log('+'+$index+':'+$('.show-1').get($index).qwe)
            //      }
            //      this.aaa = 1;
            //  });
            //  $('.plus1').click(function(){
            //      var $index = $('.plus1').index(this);
            //      if(!this.aaa)
            //         this.sum = $('.show-1').get($index).qwe;
            //     else
            //         this.sum = $('.show-1').get($index).qwe;
            //      if(this.sum > 0){
            //         this.sum --;
            //          $('input').get($index).value = this.sum;
            //           this.obj = this.sum;
            //           $('.show-1').get($index).qwe = this.sum;
            //      }
            //      else{
            //          alert('sass');
            //      }
            //      this.aaa = 1;
            //  });
            $('.head-right p').click(function(){
                location.href = 'look.html';
            } 
            )
         
    //    广告
    $('.as').mouseenter(function(){
        $('.hide-1').animate({
            right:'-20px',
        });
    }
    )
   
    $('.as').mouseleave(function(){
        $('.hide-1').animate({
           right:'-100px', 
       });
    }
    )
    $('.as-1').mouseenter(function(){
        $('.hide-2').animate({
            right:'-20px',
        });
    }
    )
   
    $('.as-1').mouseleave(function(){
        $('.hide-2').animate({
           right:'-100px', 
       });
    }
    )
        </script>
</body>
</html>